name: Unit & integration tests

on:
    push:
        branches:
            - "*"

jobs:
    test:
        runs-on: ubuntu-latest
        steps:
            - uses: actions/checkout@v2
            - name: Run unit tests
              run: make test-unit
            - uses: actions/upload-artifact@v2
              with:
                  name: Unit test report
                  path: test-report.xml
            - name: Run integration tests
              run: make test-integration
            - uses: actions/upload-artifact@v2
              with:
                  name: Integration test report
                  path: |
                      cypress/screenshots/*.png
                      integration-report.xml
